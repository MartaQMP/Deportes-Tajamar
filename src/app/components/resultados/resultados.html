<div class="tajamar-container">
  <section class="filter-container">
    <div class="filter-group">
      <form #form="ngForm">
        <label for="evento" class="form-label">Filtrar por evento:</label>
        <div class="select-wrapper">
          <select
            id="evento"
            class="custom-select"
            name="evento"
            #evento
            (change)="filtrarPorEvento($event)"
          >
            <option value="" selected disabled>Selecciona una fecha</option>
            @for (evento of this.eventos; track $index) {
            <option value="{{ evento.idEvento }}">
              {{ evento.fechaEvento | date : "EEEE, d 'de' MMMM 'de' y" }}
            </option>
            }
          </select>
        </div>
      </form>
    </div>

    <div class="filter-group">
      <form #form="ngForm">
        <label for="deporte" class="form-label">Filtrar por deporte:</label>
        <div class="select-wrapper">
          <select
            id="deporte"
            class="custom-select"
            name="deporte"
            #deporte
            (change)="filtrarPorActividad($event)"
          >
            <option value="" selected disabled>Selecciona una actividad</option>
            @for (actividad of this.actividades; track $index) {
            <option value="{{ actividad.idActividad }}">{{ actividad.nombre }}</option>
            }
          </select>
        </div>
      </form>
    </div>
    <div class="filter-actions mb-1">
      <button
        type="button"
        class="btn btn-outline-light btn-sm d-flex align-items-center gap-2"
        (click)="limpiarFiltros()"
      >
        <i class="bi bi-arrow-clockwise"></i> Mostrar todos
      </button>
    </div>
  </section>

  <hr class="divider" />

  <section class="results-list">
    <div class="accordion" id="accordionExample">
      @for (resultado of this.resultadosAMostrar; track resultado.idPartidoResultado) {
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button
            class="accordion-button collapsed"
            type="button"
            data-bs-toggle="collapse"
            [attr.data-bs-target]="'#collapse' + resultado.idPartidoResultado"
            aria-expanded="false"
            [attr.aria-controls]="'collapse' + resultado.idPartidoResultado"
          >
            <div class="d-flex justify-content-between w-100 pe-4">
              <span class="text-start" style="flex: 1">{{
                resultado.idEquipoLocal | nombreEquipo | async
              }}</span>
              <span class="fw-bold px-3"
                >{{ resultado.puntosLocal }} - {{ resultado.puntosVisitante }}</span
              >
              <span class="text-end" style="flex: 1">{{
                resultado.idEquipoVisitante | nombreEquipo | async
              }}</span>
            </div>
          </button>
        </h2>

        <div
          [id]="'collapse' + resultado.idPartidoResultado"
          class="accordion-collapse collapse"
          data-bs-parent="#accordionExample"
        >
          <div class="accordion-body">
            <div class="row">
              <div class="col-md-6 border-end">
                @for (alumno of (resultado.idEquipoLocal | alumnosEquipo | async); track
                alumno.idAlumno) {
                <p class="mb-1 text-start w-100">{{ alumno.usuario }}</p>
                }
              </div>
              <div class="col-md-6">
                @for (alumno of (resultado.idEquipoVisitante | alumnosEquipo | async); track
                alumno.idAlumno) {
                <p class="mb-1 text-end w-100">{{ alumno.usuario }}</p>
                }
              </div>
            </div>
          </div>
        </div>
      </div>
      }
    </div>
  </section>
</div>
