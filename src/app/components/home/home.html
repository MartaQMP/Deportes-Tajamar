<div class="dashboard-wrapper">

  <h1 class="welcome">Bienvenido, {{usuario.nombre}}</h1>

  <div class="dashboard-grid">

    <section class="panel-section">
      <div class="section-header">
        <h3><i class="fas fa-calendar-check" style="margin-right: 8px;"></i> Pr칩ximos Eventos</h3>
        @if(eventos.length > 0) {
          <span class="badge-count">{{eventos.length}} Activos</span>
        }
      </div>

      <div class="scroll-container">
        @if(eventos.length <= 0){ 
          <div class="empty-state">
            <div class="empty-icon">游늰</div>
            <p>No hay eventos programados</p>
            <small>Revisa m치s tarde para nuevas fechas</small>
          </div>
        } @else {
          <div class="timeline-list">
            @for(e of eventos; track e){
              <div class="event-card" (click)="MostrarActividades(e)">
                <div class="event-date-box">
                  <span class="day">{{ e.fechaEvento | date: 'dd' }}</span>
                  <span class="month">{{ e.fechaEvento | date: 'MMM' }}</span>
                </div>
                <div class="event-info">
                  <h4>{{ e.fechaEvento | date: 'EEEE' }}, Evento #{{ e.idEvento }}</h4>
                  <span class="tap-hint">Ver actividades <i class="fas fa-arrow-right"></i></span>
                </div>
              </div>
            }
          </div>
        }
      </div>
    
      <a [routerLink]="['/deportes/crear-evento']" class="btn-create-discreto">
        <i class="fas fa-plus"></i>
        Crear evento
      </a>
    </section>

    <section class="panel-section activities-panel">
      
      <div class="section-header">
        @if(eventoSeleccionado){
          <h3><i class="fas fa-dumbbell" style="margin-right: 8px;"></i> Actividades Disponibles (Evento #{{idEventoSeleccionado}})</h3>
          <a [routerLink]="['/deportes/solicitar-material', idEventoSeleccionado]" class="btn-solicitar-material">
            <i class="bi bi-send-fill"></i>
            Solicitar / Aportar Material
          </a>
        } @else {
          <h3><i class="fas fa-dumbbell" style="margin-right: 8px;"></i> Actividades Disponibles</h3>
        }
      </div>

      <div class="scroll-container">

        @if(actividades.length <= 0) { 
          <div class="empty-state dashed">
            @if(!eventoSeleccionado ) {
              <p>Selecciona un evento para ver sus actividades.</p>
            } @else {
              <p>No hay actividades disponibles para este evento.</p>
            }
          </div>
        } 
        
        @else {
          <div class="activities-grid">
            @for(a of actividades; track $index) {
              
              <div class="activity-wrapper">
                
                <button class="btn-reset" type="button" data-bs-toggle="collapse"
                  [attr.data-bs-target]="'#collapseActivity' + $index" 
                  [attr.aria-controls]="'collapseActivity' + $index"
                  aria-expanded="false">

                  <div class="activity-chip">
                    <div class="chip-icon-wrapper">
                      <i class="fas fa-running">游녤游낕</i>
                    </div>

                    <span class="chip-text">{{a.nombreActividad}}</span>

                    <div class="chip-actions">
                      <div class="inscritos-badge" title="Personas inscritas">
                        <i class="fas fa-user-friends"></i>
                        <span>{{ personasInscritas[$index] || 0 }}</span>
                      </div>

                      <div class="btn-add-visual">
                        <i class="fas fa-plus"></i>
                      </div>
                    </div>
                  </div>
                </button>

                <div class="collapse mt-2" [id]="'collapseActivity' + $index">
                  <div class="card card-body details-card">
                    <p><strong>Detalles:</strong> {{a.nombreActividad}}</p>
                    <p>M칤nimo de jugadores: {{a.minimoJugadores}}</p>
                    
                    @if(a.idProfesor == -1){
                      <p>Profesor: Por escoger</p>
                    } @else {
                      <p>Profesor: {{a.idProfesor}}</p>
                    }

                    @if(a.idActividad == 1){
                      <label class="custom-switch">
                        <input type="checkbox" [(ngModel)]="capitan">
                        <span class="slider"></span>
                        <span class="label-text">쯈uieres ser capit치n?</span>
                      </label>
                    }
                    @if (yaEstaInscrito(a.idEvento)) {
                      <button class="btn btn-sm btn-danger w-100 botonConfirmar mt-3" disabled>
                        Ya te has inscrito a una actividad
                      </button>
                    } 
                    @else {
                      <button class="btn btn-sm btn-success w-100 botonConfirmar mt-3" (click)="Inscribirse(a)">
                        Confirmar Inscripci칩n
                      </button>
                    }
                  </div>
                </div>

              </div> 
            }
          </div> 
        }

      </div>
      <a [routerLink]="['/deportes/crear-evento']" class="btn-create-discreto">
        <i class="fas fa-plus"></i>
        Crear actividad
      </a>
    </section>
    
  
  </div> <div class="calendar-section">
    <div class="calendar-header-row">
      <h2>Calendario Global</h2>
      <div class="calendar-controls">
        <button class="btn-view" [class.active]="view === CalendarView.Month"
          (click)="setView(CalendarView.Month)">Mes</button>
        <button class="btn-view" [class.active]="view === CalendarView.Week"
          (click)="setView(CalendarView.Week)">Semana</button>
      </div>
    </div>

    <div class="calendar-card" [ngSwitch]="view">
      <mwl-calendar-month-view *ngSwitchCase="CalendarView.Month" [viewDate]="viewDate" [events]="events"
        (eventClicked)="handleEvent('Clicked', $event.event)">
      </mwl-calendar-month-view>
      <mwl-calendar-week-view *ngSwitchCase="CalendarView.Week" [viewDate]="viewDate" [events]="events"
        (eventClicked)="handleEvent('Clicked', $event.event)">
      </mwl-calendar-week-view>
    </div>
  </div>

</div> ```