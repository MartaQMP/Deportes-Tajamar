<div class="dashboard-wrapper">


  <h1 class="welcome">Bienvenido, {{usuario.nombre}}</h1>


  <div class="dashboard-grid">

    <section class="panel-section">
      <div class="section-header">
        <h3><i class="fas fa-calendar-check" style="margin-right: 8px;"></i> PrÃ³ximos Eventos</h3>
        @if(eventos.length > 0) {
        <span class="badge-count">{{eventos.length}} Activos</span>
        }
      </div>

      <div class="scroll-container">
        @if(eventos.length <= 0){ <div class="empty-state">
          <div class="empty-icon">ğŸ“…</div>
          <p>No hay eventos programados</p>
          <small>Revisa mÃ¡s tarde para nuevas fechas</small>
      </div>
      } @else {
      <div class="timeline-list">
        @for(e of eventos; track e){
        <div class="event-card" (click)="MostrarActividades(e)">
          <div class="event-date-box">
            <span class="day">{{ e.fechaEvento | date: 'dd' }}</span>
            <span class="month">{{ e.fechaEvento | date: 'MMM' }}</span>
          </div>
          <div class="event-info">
            <h4>{{ e.fechaEvento | date: 'EEEE' }}, Evento #{{ e.idEvento }}</h4>

            <span class="tap-hint">Ver actividades <i class="fas fa-arrow-right"></i></span>
          </div>
        </div>
        }
      </div>
      }
  </div>
  </section>

  <section class="panel-section activities-panel">
    <div class="section-header">
      <h3><i class="fas fa-dumbbell" style="margin-right: 8px;"></i> Actividades Disponibles</h3>
    </div>

    <div class="scroll-container">
      @if(actividades.length <= 0){ <div class="empty-state dashed">
        <p>Selecciona un evento a la izquierda para ver quÃ© puedes hacer.</p>
    </div>
    } @else {
    <div class="activities-grid">
      @for(a of actividades; track $index){
      <div class="activity-chip">
        <div class="chip-icon-wrapper">
          <i class="fas fa-running">ğŸ‘‰ğŸ»</i>
        </div>

        <span class="chip-text">{{a.nombreActividad}}</span>

        <div class="chip-actions">
          <div class="inscritos-badge" title="Personas inscritas">
            <i class="fas fa-user-friends"></i>
            <span>{{personasInscritas[$index]}}</span> 
          </div>

          <button class="btn-add">
            <i class="fas fa-plus">â‡’</i>
          </button>
        </div>
        
      </div>
      
      }
    </div>
    }
</div>
</section>
</div>

<div class="calendar-section">
  <div class="calendar-header-row">
    <h2>Calendario Global</h2>
    <div class="calendar-controls">
      <button class="btn-view" [class.active]="view === CalendarView.Month"
        (click)="setView(CalendarView.Month)">Mes</button>
      <button class="btn-view" [class.active]="view === CalendarView.Week"
        (click)="setView(CalendarView.Week)">Semana</button>
    </div>
  </div>

  <div class="calendar-card" [ngSwitch]="view">
    <mwl-calendar-month-view *ngSwitchCase="CalendarView.Month" [viewDate]="viewDate" [events]="events"
      (eventClicked)="handleEvent('Clicked', $event.event)">
    </mwl-calendar-month-view>
    <mwl-calendar-week-view *ngSwitchCase="CalendarView.Week" [viewDate]="viewDate" [events]="events"
      (eventClicked)="handleEvent('Clicked', $event.event)">
    </mwl-calendar-week-view>
  </div>
</div>
</div>